## 算法学习

### [电路维修](https://www.acwing.com/problem/content/description/177/)

```cpp
#include<bits/stdc++.h>

using namespace std;

const int N=510;

const int dx[]={-1,-1,1,1};
const int dy[]={-1,1,1,-1};
const int ix[]={-1,-1,0,0};
const int iy[]={-1,0,0,-1};

const char cs[]="\\/\\/";

char ss[N][N];
int n,m;
bool isok(int x,int y){
    return 0<=x&&x<=n&&0<=y&&y<=m;
}

#define pii pair<int,int>
int d[N][N];
int bfs(){
    deque<pii> dq;
    dq.push_back({0,0});
    memset(d,0x3f,sizeof(d));
    d[0][0]=0;
    while(!dq.empty()){
        auto t=dq.front();dq.pop_front();
        int x=t.first,y=t.second;
        for(int i=0;i<4;i++){
            int nx=x+dx[i];
            int ny=y+dy[i];
            int a=x+ix[i];
            int b=y+iy[i];
            if(isok(nx,ny)){
                int w=0;
                if(ss[a][b]!=cs[i]) w=1;
                if(d[nx][ny]>d[x][y]+w){
                    d[nx][ny]=d[x][y]+w;
                    if(w) dq.push_back({nx,ny});
                    else dq.push_front({nx,ny});
                }
            }
        }
    }
    if(d[n][m]==0x3f3f3f3f) return -1;
    else return d[n][m];
}

int main(){
    int t;
    cin>>t;
    while(t--){
        cin>>n>>m;
        for(int i=0;i<n;i++) cin>>ss[i];
        int ans=bfs();
        if(ans==-1) puts("NO SOLUTION");
        else cout<<ans<<endl;
    }
    return 0;
}
```

